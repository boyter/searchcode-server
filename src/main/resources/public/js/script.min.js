(function(){function d(b){return function(p,a,c,e){a=N(a,e,4);var d=!x(p)&&f.keys(p),l=(d||p).length,h=0<b?0:l-1;3>arguments.length&&(c=p[d?d[h]:h],h+=b);for(var k=a,g=c;0<=h&&l>h;h+=b)var n=d?d[h]:h,g=k(g,p[n],n,p);return g}}function c(b){return function(p,a,c){a=A(a,c);c=J(p);for(var e=0<b?0:c-1;0<=e&&c>e;e+=b)if(a(p[e],e,p))return e;return-1}}function a(b,p,a){return function(c,e,d){var l=0,h=J(c);if("number"==typeof d)0<b?l=0<=d?d:Math.max(d+h,l):h=0<=d?Math.min(d+1,h):d+h+1;else if(a&&d&&h)return d=
a(c,e),c[d]===e?d:-1;if(e!==e)return d=p(u.call(c,l,h),f.isNaN),0<=d?d+l:-1;for(d=0<b?l:h-1;0<=d&&h>d;d+=b)if(c[d]===e)return d;return-1}}function e(b,p){var a=da.length,c=b.constructor,c=f.isFunction(c)&&c.prototype||q,e="constructor";for(f.has(b,e)&&!f.contains(p,e)&&p.push(e);a--;)e=da[a],e in b&&b[e]!==c[e]&&!f.contains(p,e)&&p.push(e)}var k=this,n=k._,g=Array.prototype,q=Object.prototype,K=g.push,u=g.slice,E=q.toString,D=q.hasOwnProperty,G=Array.isArray,ea=Object.keys,L=Function.prototype.bind,
S=Object.create,O=function(){},f=function(b){return b instanceof f?b:this instanceof f?void(this._wrapped=b):new f(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):k._=f;f.VERSION="1.8.3";var N=function(b,p,a){if(void 0===p)return b;switch(null==a?3:a){case 1:return function(a){return b.call(p,a)};case 2:return function(a,c){return b.call(p,a,c)};case 3:return function(a,c,e){return b.call(p,a,c,e)};case 4:return function(a,c,e,ta){return b.call(p,
a,c,e,ta)}}return function(){return b.apply(p,arguments)}},A=function(b,p,a){return null==b?f.identity:f.isFunction(b)?N(b,p,a):f.isObject(b)?f.matcher(b):f.property(b)};f.iteratee=function(b,p){return A(b,p,1/0)};var T=function(b,p){return function(a){var c=arguments.length;if(2>c||null==a)return a;for(var e=1;c>e;e++)for(var f=arguments[e],d=b(f),l=d.length,h=0;l>h;h++){var k=d[h];p&&void 0!==a[k]||(a[k]=f[k])}return a}},P=function(b){if(!f.isObject(b))return{};if(S)return S(b);O.prototype=b;b=
new O;return O.prototype=null,b},H=function(b){return function(p){return null==p?void 0:p[b]}},fa=Math.pow(2,53)-1,J=H("length"),x=function(b){b=J(b);return"number"==typeof b&&0<=b&&fa>=b};f.each=f.forEach=function(b,p,a){p=N(p,a);var c;if(x(b))for(a=0,c=b.length;c>a;a++)p(b[a],a,b);else{var e=f.keys(b);a=0;for(c=e.length;c>a;a++)p(b[e[a]],e[a],b)}return b};f.map=f.collect=function(b,p,a){p=A(p,a);a=!x(b)&&f.keys(b);for(var c=(a||b).length,e=Array(c),d=0;c>d;d++){var l=a?a[d]:d;e[d]=p(b[l],l,b)}return e};
f.reduce=f.foldl=f.inject=d(1);f.reduceRight=f.foldr=d(-1);f.find=f.detect=function(b,p,a){var c;return c=x(b)?f.findIndex(b,p,a):f.findKey(b,p,a),void 0!==c&&-1!==c?b[c]:void 0};f.filter=f.select=function(b,p,a){var c=[];return p=A(p,a),f.each(b,function(b,y,a){p(b,y,a)&&c.push(b)}),c};f.reject=function(b,a,c){return f.filter(b,f.negate(A(a)),c)};f.every=f.all=function(b,a,c){a=A(a,c);c=!x(b)&&f.keys(b);for(var e=(c||b).length,d=0;e>d;d++){var l=c?c[d]:d;if(!a(b[l],l,b))return!1}return!0};f.some=
f.any=function(b,a,c){a=A(a,c);c=!x(b)&&f.keys(b);for(var e=(c||b).length,d=0;e>d;d++){var l=c?c[d]:d;if(a(b[l],l,b))return!0}return!1};f.contains=f.includes=f.include=function(b,a,c,e){return x(b)||(b=f.values(b)),("number"!=typeof c||e)&&(c=0),0<=f.indexOf(b,a,c)};f.invoke=function(b,a){var c=u.call(arguments,2),e=f.isFunction(a);return f.map(b,function(b){var y=e?a:b[a];return null==y?y:y.apply(b,c)})};f.pluck=function(b,a){return f.map(b,f.property(a))};f.where=function(b,a){return f.filter(b,
f.matcher(a))};f.findWhere=function(b,a){return f.find(b,f.matcher(a))};f.max=function(b,a,c){var e,d=-1/0,l=-1/0;if(null==a&&null!=b){b=x(b)?b:f.values(b);for(var h=0,k=b.length;k>h;h++)c=b[h],c>d&&(d=c)}else a=A(a,c),f.each(b,function(b,y,c){e=a(b,y,c);(e>l||e===-1/0&&d===-1/0)&&(d=b,l=e)});return d};f.min=function(b,a,c){var e,d=1/0,l=1/0;if(null==a&&null!=b){b=x(b)?b:f.values(b);for(var h=0,k=b.length;k>h;h++)c=b[h],d>c&&(d=c)}else a=A(a,c),f.each(b,function(b,y,c){e=a(b,y,c);(l>e||1/0===e&&1/
0===d)&&(d=b,l=e)});return d};f.shuffle=function(b){for(var a=x(b)?b:f.values(b),c=a.length,e=Array(c),d=0;c>d;d++)b=f.random(0,d),b!==d&&(e[d]=e[b]),e[b]=a[d];return e};f.sample=function(b,a,c){return null==a||c?(x(b)||(b=f.values(b)),b[f.random(b.length-1)]):f.shuffle(b).slice(0,Math.max(0,a))};f.sortBy=function(b,a,c){return a=A(a,c),f.pluck(f.map(b,function(b,y,c){return{value:b,index:y,criteria:a(b,y,c)}}).sort(function(b,a){var y=b.criteria,c=a.criteria;if(y!==c){if(y>c||void 0===y)return 1;
if(c>y||void 0===c)return-1}return b.index-a.index}),"value")};var U=function(b){return function(a,c,e){var d={};return c=A(c,e),f.each(a,function(e,f){var l=c(e,f,a);b(d,e,l)}),d}};f.groupBy=U(function(b,a,c){f.has(b,c)?b[c].push(a):b[c]=[a]});f.indexBy=U(function(b,a,c){b[c]=a});f.countBy=U(function(b,a,c){f.has(b,c)?b[c]++:b[c]=1});f.toArray=function(b){return b?f.isArray(b)?u.call(b):x(b)?f.map(b,f.identity):f.values(b):[]};f.size=function(b){return null==b?0:x(b)?b.length:f.keys(b).length};f.partition=
function(b,a,c){a=A(a,c);var e=[],d=[];return f.each(b,function(b,c,y){(a(b,c,y)?e:d).push(b)}),[e,d]};f.first=f.head=f.take=function(b,a,c){return null==b?void 0:null==a||c?b[0]:f.initial(b,b.length-a)};f.initial=function(b,a,c){return u.call(b,0,Math.max(0,b.length-(null==a||c?1:a)))};f.last=function(b,a,c){return null==b?void 0:null==a||c?b[b.length-1]:f.rest(b,Math.max(0,b.length-a))};f.rest=f.tail=f.drop=function(b,a,c){return u.call(b,null==a||c?1:a)};f.compact=function(b){return f.filter(b,
f.identity)};var F=function(b,a,c,e){var d=[],l=0;e=e||0;for(var h=J(b);h>e;e++){var k=b[e];if(x(k)&&(f.isArray(k)||f.isArguments(k))){a||(k=F(k,a,c));var g=0,n=k.length;for(d.length+=n;n>g;)d[l++]=k[g++]}else c||(d[l++]=k)}return d};f.flatten=function(b,a){return F(b,a,!1)};f.without=function(b){return f.difference(b,u.call(arguments,1))};f.uniq=f.unique=function(b,a,c,e){f.isBoolean(a)||(e=c,c=a,a=!1);null!=c&&(c=A(c,e));e=[];for(var d=[],l=0,h=J(b);h>l;l++){var k=b[l],g=c?c(k,l,b):k;a?(l&&d===
g||e.push(k),d=g):c?f.contains(d,g)||(d.push(g),e.push(k)):f.contains(e,k)||e.push(k)}return e};f.union=function(){return f.uniq(F(arguments,!0,!0))};f.intersection=function(b){for(var a=[],c=arguments.length,e=0,d=J(b);d>e;e++){var l=b[e];if(!f.contains(a,l)){for(var h=1;c>h&&f.contains(arguments[h],l);h++);h===c&&a.push(l)}}return a};f.difference=function(b){var a=F(arguments,!0,!0,1);return f.filter(b,function(b){return!f.contains(a,b)})};f.zip=function(){return f.unzip(arguments)};f.unzip=function(b){for(var a=
b&&f.max(b,J).length||0,c=Array(a),e=0;a>e;e++)c[e]=f.pluck(b,e);return c};f.object=function(b,a){for(var c={},e=0,d=J(b);d>e;e++)a?c[b[e]]=a[e]:c[b[e][0]]=b[e][1];return c};f.findIndex=c(1);f.findLastIndex=c(-1);f.sortedIndex=function(b,a,c,e){c=A(c,e,1);a=c(a);e=0;for(var d=J(b);d>e;){var f=Math.floor((e+d)/2);c(b[f])<a?e=f+1:d=f}return e};f.indexOf=a(1,f.findIndex,f.sortedIndex);f.lastIndexOf=a(-1,f.findLastIndex);f.range=function(b,a,c){null==a&&(a=b||0,b=0);c=c||1;a=Math.max(Math.ceil((a-b)/
c),0);for(var e=Array(a),d=0;a>d;d++,b+=c)e[d]=b;return e};var ga=function(b,a,c,e,d){if(!(e instanceof a))return b.apply(c,d);a=P(b.prototype);b=b.apply(a,d);return f.isObject(b)?b:a};f.bind=function(b,a){if(L&&b.bind===L)return L.apply(b,u.call(arguments,1));if(!f.isFunction(b))throw new TypeError("Bind must be called on a function");var c=u.call(arguments,2),e=function(){return ga(b,e,a,this,c.concat(u.call(arguments)))};return e};f.partial=function(b){var a=u.call(arguments,1),c=function(){for(var e=
0,d=a.length,l=Array(d),h=0;d>h;h++)l[h]=a[h]===f?arguments[e++]:a[h];for(;e<arguments.length;)l.push(arguments[e++]);return ga(b,c,this,this,l)};return c};f.bindAll=function(b){var a,c,e=arguments.length;if(1>=e)throw Error("bindAll must be passed function names");for(a=1;e>a;a++)c=arguments[a],b[c]=f.bind(b[c],b);return b};f.memoize=function(b,a){var c=function(e){var d=c.cache,l=""+(a?a.apply(this,arguments):e);return f.has(d,l)||(d[l]=b.apply(this,arguments)),d[l]};return c.cache={},c};f.delay=
function(b,a){var c=u.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};f.defer=f.partial(f.delay,f,1);f.throttle=function(b,a,c){var e,d,l,h=null,k=0;c||(c={});var g=function(){k=!1===c.leading?0:f.now();h=null;l=b.apply(e,d);h||(e=d=null)};return function(){var n=f.now();k||!1!==c.leading||(k=n);var q=a-(n-k);return e=this,d=arguments,0>=q||q>a?(h&&(clearTimeout(h),h=null),k=n,l=b.apply(e,d),h||(e=d=null)):h||!1===c.trailing||(h=setTimeout(g,q)),l}};f.debounce=function(b,
a,c){var e,d,l,h,k,g=function(){var n=f.now()-h;a>n&&0<=n?e=setTimeout(g,a-n):(e=null,c||(k=b.apply(l,d),e||(l=d=null)))};return function(){l=this;d=arguments;h=f.now();var n=c&&!e;return e||(e=setTimeout(g,a)),n&&(k=b.apply(l,d),l=d=null),k}};f.wrap=function(b,a){return f.partial(a,b)};f.negate=function(b){return function(){return!b.apply(this,arguments)}};f.compose=function(){var b=arguments,a=b.length-1;return function(){for(var c=a,e=b[a].apply(this,arguments);c--;)e=b[c].call(this,e);return e}};
f.after=function(b,a){return function(){return 1>--b?a.apply(this,arguments):void 0}};f.before=function(b,a){var c;return function(){return 0<--b&&(c=a.apply(this,arguments)),1>=b&&(a=null),c}};f.once=f.partial(f.before,2);var ba=!{toString:null}.propertyIsEnumerable("toString"),da="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");f.keys=function(b){if(!f.isObject(b))return[];if(ea)return ea(b);var a=[],c;for(c in b)f.has(b,c)&&a.push(c);return ba&&e(b,
a),a};f.allKeys=function(b){if(!f.isObject(b))return[];var a=[],c;for(c in b)a.push(c);return ba&&e(b,a),a};f.values=function(b){for(var a=f.keys(b),c=a.length,e=Array(c),d=0;c>d;d++)e[d]=b[a[d]];return e};f.mapObject=function(b,a,c){a=A(a,c);for(var e=f.keys(b),d=e.length,l={},h=0;d>h;h++)c=e[h],l[c]=a(b[c],c,b);return l};f.pairs=function(b){for(var a=f.keys(b),c=a.length,e=Array(c),d=0;c>d;d++)e[d]=[a[d],b[a[d]]];return e};f.invert=function(b){for(var a={},c=f.keys(b),e=0,d=c.length;d>e;e++)a[b[c[e]]]=
c[e];return a};f.functions=f.methods=function(b){var a=[],c;for(c in b)f.isFunction(b[c])&&a.push(c);return a.sort()};f.extend=T(f.allKeys);f.extendOwn=f.assign=T(f.keys);f.findKey=function(b,a,c){a=A(a,c);var e;c=f.keys(b);for(var d=0,l=c.length;l>d;d++)if(e=c[d],a(b[e],e,b))return e};f.pick=function(b,a,c){var e,d,l={},h=b;if(null==h)return l;f.isFunction(a)?(d=f.allKeys(h),e=N(a,c)):(d=F(arguments,!1,!1,1),e=function(b,a,c){return a in c},h=Object(h));for(var k=0,g=d.length;g>k;k++){var n=d[k],
q=h[n];e(q,n,h)&&(l[n]=q)}return l};f.omit=function(b,a,c){if(f.isFunction(a))a=f.negate(a);else{var e=f.map(F(arguments,!1,!1,1),String);a=function(b,a){return!f.contains(e,a)}}return f.pick(b,a,c)};f.defaults=T(f.allKeys,!0);f.create=function(b,a){var c=P(b);return a&&f.extendOwn(c,a),c};f.clone=function(b){return f.isObject(b)?f.isArray(b)?b.slice():f.extend({},b):b};f.tap=function(b,a){return a(b),b};f.isMatch=function(b,a){var c=f.keys(a),e=c.length;if(null==b)return!e;for(var d=Object(b),l=
0;e>l;l++){var h=c[l];if(a[h]!==d[h]||!(h in d))return!1}return!0};var V=function(b,a,c,e){if(b===a)return 0!==b||1/b===1/a;if(null==b||null==a)return b===a;b instanceof f&&(b=b._wrapped);a instanceof f&&(a=a._wrapped);var d=E.call(b);if(d!==E.call(a))return!1;switch(d){case "[object RegExp]":case "[object String]":return""+b==""+a;case "[object Number]":return+b!==+b?+a!==+a:0===+b?1/+b===1/a:+b===+a;case "[object Date]":case "[object Boolean]":return+b===+a}d="[object Array]"===d;if(!d){if("object"!=
typeof b||"object"!=typeof a)return!1;var l=b.constructor,h=a.constructor;if(l!==h&&!(f.isFunction(l)&&l instanceof l&&f.isFunction(h)&&h instanceof h)&&"constructor"in b&&"constructor"in a)return!1}c=c||[];e=e||[];for(l=c.length;l--;)if(c[l]===b)return e[l]===a;if(c.push(b),e.push(a),d){if(l=b.length,l!==a.length)return!1;for(;l--;)if(!V(b[l],a[l],c,e))return!1}else{var k,d=f.keys(b);if(l=d.length,f.keys(a).length!==l)return!1;for(;l--;)if(k=d[l],!f.has(a,k)||!V(b[k],a[k],c,e))return!1}return c.pop(),
e.pop(),!0};f.isEqual=function(b,a){return V(b,a)};f.isEmpty=function(b){return null==b?!0:x(b)&&(f.isArray(b)||f.isString(b)||f.isArguments(b))?0===b.length:0===f.keys(b).length};f.isElement=function(b){return!(!b||1!==b.nodeType)};f.isArray=G||function(b){return"[object Array]"===E.call(b)};f.isObject=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b};f.each("Arguments Function String Number Date RegExp Error".split(" "),function(b){f["is"+b]=function(a){return E.call(a)==="[object "+
b+"]"}});f.isArguments(arguments)||(f.isArguments=function(b){return f.has(b,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(f.isFunction=function(b){return"function"==typeof b||!1});f.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};f.isNaN=function(b){return f.isNumber(b)&&b!==+b};f.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"===E.call(b)};f.isNull=function(b){return null===b};f.isUndefined=function(b){return void 0===b};f.has=function(b,a){return null!=
b&&D.call(b,a)};f.noConflict=function(){return k._=n,this};f.identity=function(b){return b};f.constant=function(b){return function(){return b}};f.noop=function(){};f.property=H;f.propertyOf=function(b){return null==b?function(){}:function(a){return b[a]}};f.matcher=f.matches=function(b){return b=f.extendOwn({},b),function(a){return f.isMatch(a,b)}};f.times=function(b,a,c){var e=Array(Math.max(0,b));a=N(a,c,1);for(c=0;b>c;c++)e[c]=a(c);return e};f.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*
(a-b+1))};f.now=Date.now||function(){return(new Date).getTime()};G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};T=f.invert(G);H=function(b){var a=function(a){return b[a]},c="(?:"+f.keys(b).join("|")+")",e=RegExp(c),d=RegExp(c,"g");return function(b){return b=null==b?"":""+b,e.test(b)?b.replace(d,a):b}};f.escape=H(G);f.unescape=H(T);f.result=function(b,a,c){a=null==b?void 0:b[a];return void 0===a&&(a=c),f.isFunction(a)?a.call(b):a};var Q=0;f.uniqueId=function(b){var a=
++Q+"";return b?b+a:a};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,ha={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},b=/\\|'|\r|\n|\u2028|\u2029/g,l=function(b){return"\\"+ha[b]};f.template=function(a,c,e){!c&&e&&(c=e);c=f.defaults({},c,f.templateSettings);e=RegExp([(c.escape||R).source,(c.interpolate||R).source,(c.evaluate||R).source].join("|")+"|$","g");var d=0,h="__p+='";a.replace(e,function(c,e,
f,k,g){return h+=a.slice(d,g).replace(b,l),d=g+c.length,e?h+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":f?h+="'+\n((__t=("+f+"))==null?'':__t)+\n'":k&&(h+="';\n"+k+"\n__p+='"),c});h+="';\n";c.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var k=new Function(c.variable||"obj","_",h)}catch(g){throw g.source=h,g;}e=function(b){return k.call(this,b,f)};return e.source="function("+(c.variable||
"obj")+"){\n"+h+"}",e};f.chain=function(b){b=f(b);return b._chain=!0,b};var h=function(b,a){return b._chain?f(a).chain():a};f.mixin=function(b){f.each(f.functions(b),function(a){var c=f[a]=b[a];f.prototype[a]=function(){var b=[this._wrapped];return K.apply(b,arguments),h(this,c.apply(f,b))}})};f.mixin(f);f.each("pop push reverse shift sort splice unshift".split(" "),function(b){var a=g[b];f.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!==b&&"splice"!==b||0!==c.length||
delete c[0],h(this,c)}});f.each(["concat","join","slice"],function(b){var a=g[b];f.prototype[b]=function(){return h(this,a.apply(this._wrapped,arguments))}});f.prototype.value=function(){return this._wrapped};f.prototype.valueOf=f.prototype.toJSON=f.prototype.value;f.prototype.toString=function(){return""+this._wrapped};"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this);(function(){function d(c,a,e){this.maxSize_=c||-1;this.debug_=a||!1;this.storage_=e||new d.BasicCacheStorage;this.fillFactor_=.75;this.stats_={};this.stats_.hits=0;this.stats_.misses=0;this.log_("Initialized cache with size "+c)}d.Priority={LOW:1,NORMAL:2,HIGH:4};d.BasicCacheStorage=function(){this.items_={};this.count_=0};d.BasicCacheStorage.prototype.get=function(c){return this.items_[c]};d.BasicCacheStorage.prototype.set=function(c,a){"undefined"===typeof this.get(c)&&this.count_++;this.items_[c]=
a};d.BasicCacheStorage.prototype.size=function(c,a){return this.count_};d.BasicCacheStorage.prototype.remove=function(c){var a=this.get(c);"undefined"!==typeof a&&this.count_--;delete this.items_[c];return a};d.BasicCacheStorage.prototype.keys=function(){var c=[],a;for(a in this.items_)c.push(a);return c};d.LocalStorageCacheStorage=function(c){this.prefix_="cache-storage."+(c||"default")+".";c=this.prefix_.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");this.regexp_=new RegExp("^"+c)};d.LocalStorageCacheStorage.prototype.get=
function(c){return(c=window.localStorage[this.prefix_+c])?JSON.parse(c):null};d.LocalStorageCacheStorage.prototype.set=function(c,a){window.localStorage[this.prefix_+c]=JSON.stringify(a)};d.LocalStorageCacheStorage.prototype.size=function(c,a){return this.keys().length};d.LocalStorageCacheStorage.prototype.remove=function(c){var a=this.get(c);delete window.localStorage[this.prefix_+c];return a};d.LocalStorageCacheStorage.prototype.keys=function(){var c=[],a;for(a in window.localStorage)a.match(this.regexp_)&&
c.push(a.replace(this.prefix_,""));return c};d.prototype.getItem=function(c){var a=this.storage_.get(c);null!=a&&(this.isExpired_(a)?(this.removeItem(c),a=null):a.lastAccessed=(new Date).getTime());(a=a?a.value:null)?(this.stats_.hits++,this.log_("Cache HIT for key "+c)):(this.stats_.misses++,this.log_("Cache MISS for key "+c));return a};d._CacheItem=function(c,a,e){if(!c)throw Error("key cannot be null or empty");this.key=c;this.value=a;e=e||{};e.expirationAbsolute&&(e.expirationAbsolute=e.expirationAbsolute.getTime());
e.priority||(e.priority=d.Priority.NORMAL);this.options=e;this.lastAccessed=(new Date).getTime()};d.prototype.setItem=function(c,a,e){null!=this.storage_.get(c)&&this.removeItem(c);this.addItem_(new d._CacheItem(c,a,e));this.log_("Setting key "+c);if(0<this.maxSize_&&this.size()>this.maxSize_){var k=this;setTimeout(function(){k.purge_.call(k)},0)}};d.prototype.clear=function(){for(var c=this.storage_.keys(),a=0;a<c.length;a++)this.removeItem(c[a]);this.log_("Cache cleared")};d.prototype.getStats=
function(){return this.stats_};d.prototype.toHtmlString=function(){for(var c=this.size()+" item(s) in cache<br /><ul>",a=this.storage_.keys(),e=0;e<a.length;e++)var d=this.storage_.get(a[e]),c=c+"<li>"+d.key.toString()+" = "+d.value.toString()+"</li>";return c+"</ul>"};d.prototype.resize=function(c){this.log_("Resizing Cache from "+this.maxSize_+" to "+c);var a=this.maxSize_;this.maxSize_=c;0<c&&(0>a||c<a)&&this.size()>c&&this.purge_();this.log_("Resizing done")};d.prototype.purge_=function(){var c=
[],a=Math.round(this.maxSize_*this.fillFactor_);0>this.maxSize_&&(a=this.size()*this.fillFactor_);for(var e=this.storage_.keys(),d=0;d<e.length;d++){var n=e[d],g=this.storage_.get(n);this.isExpired_(g)?this.removeItem(n):c.push(g)}if(c.length>a)for(c=c.sort(function(a,c){return a.options.priority!=c.options.priority?c.options.priority-a.options.priority:c.lastAccessed-a.lastAccessed});c.length>a;)e=c.pop(),this.removeItem(e.key);this.log_("Purged cached")};d.prototype.addItem_=function(c,a){try{this.storage_.set(c.key,
c)}catch(e){if(a)throw this.log_("Failed setting again, giving up: "+e.toString()),e;this.log_("Error adding item, purging and trying again: "+e.toString());this.purge_();this.addItem_(c,!0)}};d.prototype.removeItem=function(c){var a=this.storage_.remove(c);this.log_("removed key "+c);a&&a.options&&a.options.callback&&setTimeout(function(){a.options.callback.call(null,a.key,a.value)},0);return a?a.value:null};d.prototype.removeWhere=function(c){for(var a=this.storage_.keys(),e=0;e<a.length;e++){var d=
a[e],n=this.storage_.get(d);!0===c(d,n.value)&&this.removeItem(d)}};d.prototype.size=function(){return this.storage_.size()};d.prototype.isExpired_=function(c){var a=(new Date).getTime(),e=!1;c.options.expirationAbsolute&&c.options.expirationAbsolute<a&&(e=!0);!e&&c.options.expirationSliding&&c.lastAccessed+1E3*c.options.expirationSliding<a&&(e=!0);return e};d.prototype.log_=function(c){this.debug_&&console.log(c)};"undefined"!==typeof module&&module.exports?module.exports=d:"function"==typeof define&&
define.amd?define(function(){return d}):this.Cache=d})();(function(){var d=this,c=d.Chart,a=function(b){this.canvas=b.canvas;this.ctx=b;var a=function(b,a){return b["offset"+a]?b["offset"+a]:document.defaultView.getComputedStyle(b).getPropertyValue(a)},c=this.width=a(b.canvas,"Width"),a=this.height=a(b.canvas,"Height");b.canvas.width=c;b.canvas.height=a;c=this.width=b.canvas.width;a=this.height=b.canvas.height;return this.aspectRatio=this.width/this.height,e.retinaScale(this),this};a.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",
showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",
tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",
onAnimationProgress:function(){},onAnimationComplete:function(){}}};a.types={};var e=a.helpers={},k=e.each=function(b,a,c){var e=Array.prototype.slice.call(arguments,3);if(b)if(b.length===+b.length){var d;for(d=0;d<b.length;d++)a.apply(c,[b[d],d].concat(e))}else for(d in b)a.apply(c,[b[d],d].concat(e))},n=e.clone=function(b){var a={};return k(b,function(c,e){b.hasOwnProperty(e)&&(a[e]=c)}),a},g=e.extend=function(b){return k(Array.prototype.slice.call(arguments,1),function(a){k(a,function(c,e){a.hasOwnProperty(e)&&
(b[e]=c)})}),b},q=e.merge=function(){var b=Array.prototype.slice.call(arguments,0);return b.unshift({}),g.apply(null,b)},K=e.indexOf=function(b,a){if(Array.prototype.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(b[c]===a)return c;return-1},u=(e.where=function(b,a){var c=[];return e.each(b,function(b){a(b)&&c.push(b)}),c},e.findNextWhere=function(b,a,c){c||(c=-1);for(c+=1;c<b.length;c++){var e=b[c];if(a(e))return e}},e.findPreviousWhere=function(b,a,c){c||(c=b.length);for(--c;0<=c;c--){var e=
b[c];if(a(e))return e}},e.inherits=function(b){var a=this,c=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},e=function(){this.constructor=c};return e.prototype=a.prototype,c.prototype=new e,c.extend=u,b&&g(c.prototype,b),c.__super__=a.prototype,c}),E=e.noop=function(){},D=e.uid=function(){var b=0;return function(){return"chart-"+b++}}(),G=e.warn=function(b){window.console&&"function"==typeof window.console.warn&&console.warn(b)},ea=e.amd="function"==typeof define&&
define.amd,L=e.isNumber=function(b){return!isNaN(parseFloat(b))&&isFinite(b)},S=e.max=function(b){return Math.max.apply(Math,b)},O=e.min=function(b){return Math.min.apply(Math,b)},f=(e.cap=function(b,a,c){if(L(a)){if(b>a)return a}else if(L(c)&&c>b)return c;return b},e.getDecimalPlaces=function(b){return 0!==b%1&&L(b)?b.toString().split(".")[1].length:0}),N=e.radians=function(b){return Math.PI/180*b},A=(e.getAngleFromPoint=function(b,a){var c=a.x-b.x,e=a.y-b.y,d=Math.sqrt(c*c+e*e),f=2*Math.PI+Math.atan2(e,
c);return 0>c&&0>e&&(f+=2*Math.PI),{angle:f,distance:d}},e.aliasPixel=function(b){return 0===b%2?0:.5}),T=(e.splineCurve=function(b,a,c,e){var d=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)),f=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2)),k=e*d/(d+f);e=e*f/(d+f);return{inner:{x:a.x-k*(c.x-b.x),y:a.y-k*(c.y-b.y)},outer:{x:a.x+e*(c.x-b.x),y:a.y+e*(c.y-b.y)}}},e.calculateOrderOfMagnitude=function(b){return Math.floor(Math.log(b)/Math.LN10)}),P=(e.calculateScaleRange=function(b,a,c,e,d){a=Math.floor(a/
(1.5*c));c=2>=a;var f=S(b),k=O(b);f===k&&(f+=.5,.5<=k&&!e?k-=.5:f+=.5);b=T(Math.abs(f-k));e=e?0:Math.floor(k/(1*Math.pow(10,b)))*Math.pow(10,b);for(var f=Math.ceil(f/(1*Math.pow(10,b)))*Math.pow(10,b)-e,k=Math.pow(10,b),g=Math.round(f/k);(g>a||a>2*g)&&!c;)if(g>a)k*=2,g=Math.round(f/k),0!==g%1&&(c=!0);else{if(d&&0<=b&&0!==k/2%1)break;k/=2;g=Math.round(f/k)}return c&&(g=2,k=f/g),{steps:g,stepValue:k,min:e,max:e+g*k}},e.template=function(b,a){if(b instanceof Function)return b(a);var c={},c=/\W/.test(b)?
new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[b]=c[b];return a?c(a):c}),H=(e.generateLabels=function(b,a,c,e){var d=Array(a);return labelTemplateString&&k(d,function(a,f){d[f]=P(b,{value:c+e*(f+1)})}),d},e.easingEffects={linear:function(b){return b},
easeInQuad:function(b){return b*b},easeOutQuad:function(b){return-1*b*(b-2)},easeInOutQuad:function(b){return 1>(b/=.5)?.5*b*b:-.5*(--b*(b-2)-1)},easeInCubic:function(b){return b*b*b},easeOutCubic:function(b){return 1*((b=b/1-1)*b*b+1)},easeInOutCubic:function(b){return 1>(b/=.5)?.5*b*b*b:.5*((b-=2)*b*b+2)},easeInQuart:function(b){return b*b*b*b},easeOutQuart:function(b){return-1*((b=b/1-1)*b*b*b-1)},easeInOutQuart:function(b){return 1>(b/=.5)?.5*b*b*b*b:-.5*((b-=2)*b*b*b-2)},easeInQuint:function(b){return 1*
(b/=1)*b*b*b*b},easeOutQuint:function(b){return 1*((b=b/1-1)*b*b*b*b+1)},easeInOutQuint:function(b){return 1>(b/=.5)?.5*b*b*b*b*b:.5*((b-=2)*b*b*b*b+2)},easeInSine:function(b){return-1*Math.cos(b/1*(Math.PI/2))+1},easeOutSine:function(b){return 1*Math.sin(b/1*(Math.PI/2))},easeInOutSine:function(b){return-.5*(Math.cos(Math.PI*b/1)-1)},easeInExpo:function(b){return 0===b?1:1*Math.pow(2,10*(b/1-1))},easeOutExpo:function(b){return 1===b?1:1*(-Math.pow(2,-10*b/1)+1)},easeInOutExpo:function(b){return 0===
b?0:1===b?1:1>(b/=.5)?.5*Math.pow(2,10*(b-1)):.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return 1<=b?b:-1*(Math.sqrt(1-(b/=1)*b)-1)},easeOutCirc:function(b){return 1*Math.sqrt(1-(b=b/1-1)*b)},easeInOutCirc:function(b){return 1>(b/=.5)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},easeInElastic:function(b){var a=1.70158,c=0,e=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)))},easeOutElastic:function(b){var a=
1.70158,c=0,e=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*b)*Math.sin(2*(1*b-a)*Math.PI/c)+1)},easeInOutElastic:function(b){var a=1.70158,c=0,e=1;return 0===b?0:2==(b/=.5)?1:(c||(c=.3*1.5),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),1>b?-.5*e*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c):e*Math.pow(2,-10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)*.5+1)},easeInBack:function(b){return 1*(b/=1)*b*(2.70158*b-1.70158)},easeOutBack:function(b){return 1*
((b=b/1-1)*b*(2.70158*b+1.70158)+1)},easeInOutBack:function(b){var a=1.70158;return 1>(b/=.5)?.5*b*b*(((a*=1.525)+1)*b-a):.5*((b-=2)*b*(((a*=1.525)+1)*b+a)+2)},easeInBounce:function(b){return 1-H.easeOutBounce(1-b)},easeOutBounce:function(b){return(b/=1)<1/2.75?7.5625*b*b:2/2.75>b?1*(7.5625*(b-=1.5/2.75)*b+.75):2.5/2.75>b?1*(7.5625*(b-=2.25/2.75)*b+.9375):1*(7.5625*(b-=2.625/2.75)*b+.984375)},easeInOutBounce:function(b){return.5>b?.5*H.easeInBounce(2*b):.5*H.easeOutBounce(2*b-1)+.5}}),fa=e.requestAnimFrame=
function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(b,1E3/60)}}(),J=e.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(b){return window.clearTimeout(b,1E3/60)}}(),x=(e.animationLoop=function(b,
a,c,e,d,f){var k=0,g=H[c]||H.linear,n=function(){k++;var c=k/a,h=g(c);b.call(f,h,c,k);e.call(f,h,c);a>k?f.animationFrame=fa(n):d.apply(f)};fa(n)},e.getRelativePosition=function(b){var a,c,e=b.originalEvent||b;b=(b.currentTarget||b.srcElement).getBoundingClientRect();return e.touches?(a=e.touches[0].clientX-b.left,c=e.touches[0].clientY-b.top):(a=e.clientX-b.left,c=e.clientY-b.top),{x:a,y:c}},e.addEvent=function(b,a,c){b.addEventListener?b.addEventListener(a,c):b.attachEvent?b.attachEvent("on"+a,c):
b["on"+a]=c}),U=e.removeEvent=function(b,a,c){b.removeEventListener?b.removeEventListener(a,c,!1):b.detachEvent?b.detachEvent("on"+a,c):b["on"+a]=E},F=(e.bindEvents=function(b,a,c){b.events||(b.events={});k(a,function(a){b.events[a]=function(){c.apply(b,arguments)};x(b.chart.canvas,a,b.events[a])})},e.unbindEvents=function(b,a){k(a,function(a,c){U(b.chart.canvas,c,a)})}),ga=e.getMaximumWidth=function(b){return b.parentNode.clientWidth},ba=e.getMaximumHeight=function(b){return b.parentNode.clientHeight},
da=(e.getMaximumSize=e.getMaximumWidth,e.retinaScale=function(b){var a=b.ctx,c=b.canvas.width;b=b.canvas.height;window.devicePixelRatio&&(a.canvas.style.width=c+"px",a.canvas.style.height=b+"px",a.canvas.height=b*window.devicePixelRatio,a.canvas.width=c*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio))}),V=e.clear=function(b){b.ctx.clearRect(0,0,b.width,b.height)},Q=e.fontString=function(b,a,c){return a+" "+b+"px "+c},R=e.longestText=function(b,a,c){b.font=a;var e=
0;return k(c,function(a){a=b.measureText(a).width;e=a>e?a:e}),e},ha=e.drawRoundedRectangle=function(b,a,c,e,d,f){b.beginPath();b.moveTo(a+f,c);b.lineTo(a+e-f,c);b.quadraticCurveTo(a+e,c,a+e,c+f);b.lineTo(a+e,c+d-f);b.quadraticCurveTo(a+e,c+d,a+e-f,c+d);b.lineTo(a+f,c+d);b.quadraticCurveTo(a,c+d,a,c+d-f);b.lineTo(a,c+f);b.quadraticCurveTo(a,c,a+f,c);b.closePath()};a.instances={};a.Type=function(b,c,e){this.options=c;this.chart=e;this.id=D();a.instances[this.id]=this;c.responsive&&this.resize();this.initialize.call(this,
b)};g(a.Type.prototype,{initialize:function(){return this},clear:function(){return V(this.chart),this},stop:function(){return J(this.animationFrame),this},resize:function(b){this.stop();var a=this.chart.canvas,c=ga(this.chart.canvas),e=this.options.maintainAspectRatio?c/this.chart.aspectRatio:ba(this.chart.canvas);return a.width=this.chart.width=c,a.height=this.chart.height=e,da(this.chart),"function"==typeof b&&b.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:E,render:function(b){return b&&
this.reflow(),this.options.animation&&!b?e.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return P(this.options.legendTemplate,this)},destroy:function(){this.clear();F(this,this.events);var b=this.chart.canvas;b.width=this.chart.width;b.height=this.chart.height;b.style.removeProperty?(b.style.removeProperty("width"),
b.style.removeProperty("height")):(b.style.removeAttribute("width"),b.style.removeAttribute("height"));delete a.instances[this.id]},showTooltip:function(b,c){"undefined"==typeof this.activeElements&&(this.activeElements=[]);if(function(b){var a=!1;return b.length!==this.activeElements.length?a=!0:(k(b,function(b,c){b!==this.activeElements[c]&&(a=!0)},this),a)}.call(this,b)||c){if(this.activeElements=b,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),0<b.length)if(this.datasets&&
1<this.datasets.length){for(var d,f,g=this.datasets.length-1;0<=g&&(d=this.datasets[g].points||this.datasets[g].bars||this.datasets[g].segments,f=K(d,b[0]),-1===f);g--);var n=[],q=[];d=function(){var b,a,c,d,k,l=[],g=[],h=[];return e.each(this.datasets,function(a){b=a.points||a.bars||a.segments;b[f]&&b[f].hasValue()&&l.push(b[f])}),e.each(l,function(b){g.push(b.x);h.push(b.y);n.push(e.template(this.options.multiTooltipTemplate,b));q.push({fill:b._saved.fillColor||b.fillColor,stroke:b._saved.strokeColor||
b.strokeColor})},this),k=O(h),c=S(h),d=O(g),a=S(g),{x:d>this.chart.width/2?d:a,y:(k+c)/2}}.call(this,f);(new a.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,
titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:n,legendColors:q,legendColorBackground:this.options.multiTooltipKeyBackground,title:b[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips})).draw()}else k(b,function(b){var c=b.tooltipPosition();(new a.Tooltip({x:Math.round(c.x),y:Math.round(c.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,
fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:P(this.options.tooltipTemplate,b),chart:this.chart,custom:this.options.customTooltips})).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});
a.Type.extend=function(b){var c=this,e=function(){return c.apply(this,arguments)};if(e.prototype=n(c.prototype),g(e.prototype,b),e.extend=a.Type.extend,b.name||c.prototype.name){var d=b.name||c.prototype.name,f=a.defaults[c.prototype.name]?n(a.defaults[c.prototype.name]):{};a.defaults[d]=g(f,b.defaults);a.types[d]=e;a.prototype[d]=function(b,c){var f=q(a.defaults.global,a.defaults[d],c||{});return new e(b,f,this)}}else G("Name not provided for this chart, so it hasn't been registered");return c};
a.Element=function(b){g(this,b);this.initialize.apply(this,arguments);this.save()};g(a.Element.prototype,{initialize:function(){},restore:function(b){return b?k(b,function(b){this[b]=this._saved[b]},this):g(this,this._saved),this},save:function(){return this._saved=n(this),delete this._saved._saved,this},update:function(b){return k(b,function(b,a){this._saved[a]=this[a];this[a]=b},this),this},transition:function(b,a){return k(b,function(b,c){this[c]=(b-this._saved[c])*a+this._saved[c]},this),this},
tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return L(this.value)}});a.Element.extend=u;a.Point=a.Element.extend({display:!0,inRange:function(b,a){return Math.pow(b-this.x,2)+Math.pow(a-this.y,2)<Math.pow(this.hitDetectionRadius+this.radius,2)},draw:function(){if(this.display){var b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.radius,0,2*Math.PI);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.stroke()}}});
a.Arc=a.Element.extend({inRange:function(b,a){var c=e.getAngleFromPoint(this,{x:b,y:a}),d=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return c.angle>=this.startAngle&&c.angle<=this.endAngle&&d},tooltipPosition:function(){var b=this.startAngle+(this.endAngle-this.startAngle)/2,a=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(b)*a,y:this.y+Math.sin(b)*a}},draw:function(b){b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);
b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.lineJoin="bevel";this.showStroke&&b.stroke()}});a.Rectangle=a.Element.extend({draw:function(){var b=this.ctx,a=this.width/2,c=this.x-a,a=this.x+a,e=this.base-(this.base-this.y),d=this.strokeWidth/2;this.showStroke&&(c+=d,a-=d,e+=d);b.beginPath();b.fillStyle=this.fillColor;b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;
b.moveTo(c,this.base);b.lineTo(c,e);b.lineTo(a,e);b.lineTo(a,this.base);b.fill();this.showStroke&&b.stroke()},height:function(){return this.base-this.y},inRange:function(b,a){return b>=this.x-this.width/2&&b<=this.x+this.width/2&&a>=this.y&&a<=this.base}});a.Tooltip=a.Element.extend({draw:function(){var b=this.chart.ctx;b.font=Q(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var a=this.caretPadding=2,c=b.measureText(this.text).width+2*this.xPadding,e=this.fontSize+
2*this.yPadding,d=e+this.caretHeight+a;this.x+c/2>this.chart.width?this.xAlign="left":0>this.x-c/2&&(this.xAlign="right");0>this.y-d&&(this.yAlign="below");var f=this.x-c/2,d=this.y-d;if(b.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case "above":b.beginPath();b.moveTo(this.x,this.y-a);b.lineTo(this.x+this.caretHeight,this.y-(a+this.caretHeight));b.lineTo(this.x-this.caretHeight,this.y-(a+this.caretHeight));b.closePath();b.fill();break;case "below":d=this.y+a+this.caretHeight,
b.beginPath(),b.moveTo(this.x,this.y+a),b.lineTo(this.x+this.caretHeight,this.y+a+this.caretHeight),b.lineTo(this.x-this.caretHeight,this.y+a+this.caretHeight),b.closePath(),b.fill()}switch(this.xAlign){case "left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case "right":f=this.x-(this.cornerRadius+this.caretHeight)}ha(b,f,d,c,e,this.cornerRadius);b.fill();b.fillStyle=this.textColor;b.textAlign="center";b.textBaseline="middle";b.fillText(this.text,f+c/2,d+e/2)}}});a.MultiTooltip=a.Element.extend({initialize:function(){this.font=
Q(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=Q(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+this.fontSize/2*(this.labels.length-1)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var b=this.ctx.measureText(this.title).width,a=R(this.ctx,this.font,this.labels)+this.fontSize+3;this.width=S([a,b])+2*this.xPadding;b=this.height/2;0>this.y-b?this.y=b:this.y+b>this.chart.height&&(this.y=this.chart.height-
b);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(b){var a=this.y-this.height/2+this.yPadding;return 0===b?a+this.titleFontSize/2:a+(1.5*this.fontSize*(b-1)+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{ha(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var b=this.ctx;b.fillStyle=this.fillColor;b.fill();b.closePath();b.textAlign="left";b.textBaseline="middle";b.fillStyle=
this.titleTextColor;b.font=this.titleFont;b.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));b.font=this.font;e.each(this.labels,function(a,c){b.fillStyle=this.textColor;b.fillText(a,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1));b.fillStyle=this.legendColorBackground;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize);b.fillStyle=this.legendColors[c].fill;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/
2,this.fontSize,this.fontSize)},this)}}});a.Scale=a.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(P(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}));this.yLabelWidth=this.display&&this.showLabels?R(this.ctx,this.font,this.yLabels):0},addXLabel:function(b){this.xLabels.push(b);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;
this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var b,a=this.endPoint-this.startPoint;this.calculateYRange(a);this.buildYLabels();for(this.calculateXLabelRotation();a>this.endPoint-this.startPoint;)a=this.endPoint-this.startPoint,b=this.yLabelWidth,this.calculateYRange(a),this.buildYLabels(),b<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=
this.font;var b,a=this.ctx.measureText(this.xLabels[0]).width;if(this.xScalePaddingRight=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width/2+3,this.xScalePaddingLeft=a/2>this.yLabelWidth+10?a/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var c,e=R(this.ctx,this.font,this.xLabels);this.xLabelWidth=e;for(var d=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>d&&0===this.xLabelRotation||this.xLabelWidth>d&&90>=this.xLabelRotation&&0<this.xLabelRotation;)c=
Math.cos(N(this.xLabelRotation)),b=c*a,b+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=b+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=c*e;0<this.xLabelRotation&&(this.endPoint-=Math.sin(N(this.xLabelRotation))*e+3)}else this.xLabelWidth=0,this.xScalePaddingLeft=this.xScalePaddingRight=this.padding},calculateYRange:E,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(b){var a=this.drawingArea()/(this.min-
this.max);return this.endPoint-a*(b-this.min)},calculateX:function(b){var a=(0<this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1);b=a*b+this.xScalePaddingLeft;return this.offsetGridLines&&(b+=a/2),Math.round(b)},update:function(b){e.extend(this,b);this.fit()},draw:function(){var b=this.ctx,a=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(b.fillStyle=this.textColor,
b.font=this.font,k(this.yLabels,function(d,f){var k=this.endPoint-a*f,g=Math.round(k),n=this.showHorizontalLines;b.textAlign="right";b.textBaseline="middle";this.showLabels&&b.fillText(d,c-10,k);0!==f||n||(n=!0);n&&b.beginPath();0<f?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);g+=e.aliasPixel(b.lineWidth);n&&(b.moveTo(c,g),b.lineTo(this.width,g),b.stroke(),b.closePath());b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;
b.beginPath();b.moveTo(c-5,g);b.lineTo(c,g);b.stroke();b.closePath()},this),k(this.xLabels,function(a,c){var e=this.calculateX(c)+A(this.lineWidth),d=this.calculateX(c-(this.offsetGridLines?.5:0))+A(this.lineWidth),f=0<this.xLabelRotation,k=this.showVerticalLines;0!==c||k||(k=!0);k&&b.beginPath();0<c?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);k&&(b.moveTo(d,this.endPoint),b.lineTo(d,this.startPoint-3),b.stroke(),b.closePath());
b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;b.beginPath();b.moveTo(d,this.endPoint);b.lineTo(d,this.endPoint+5);b.stroke();b.closePath();b.save();b.translate(e,f?this.endPoint+12:this.endPoint+8);b.rotate(-1*N(this.xLabelRotation));b.font=this.font;b.textAlign=f?"right":"center";b.textBaseline=f?"middle":"top";b.fillText(a,0,0);b.restore()},this))}});a.RadialScale=a.Element.extend({initialize:function(){this.size=O([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/
2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(b){return this.drawingArea/(this.max-this.min)*(b-this.min)},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(P(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}))},getCircumference:function(){return 2*
Math.PI/this.valuesCount},setScaleSize:function(){var b,a,c,e,d,f,k,g=O([this.height/2-this.pointLabelFontSize-5,this.width/2]);k=this.width;var n=0;this.ctx.font=Q(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(a=0;a<this.valuesCount;a++)b=this.getPointPosition(a,g),c=this.ctx.measureText(P(this.templateString,{value:this.labels[a]})).width+5,0===a||a===this.valuesCount/2?(e=c/2,b.x+e>k&&(k=b.x+e,d=a),b.x-e<n&&(n=b.x-e,f=a)):a<this.valuesCount/2?b.x+c>k&&(k=b.x+c,
d=a):a>this.valuesCount/2&&b.x-c<n&&(n=b.x-c,f=a);b=n;k=Math.ceil(k-this.width);d=this.getIndexAngle(d);f=this.getIndexAngle(f);d=k/Math.sin(d+Math.PI/2);f=b/Math.sin(f+Math.PI/2);d=L(d)?d:0;f=L(f)?f:0;this.drawingArea=g-(f+d)/2;this.setCenterPoint(f,d)},setCenterPoint:function(b,a){this.xCenter=(b+this.drawingArea+(this.width-a-this.drawingArea))/2;this.yCenter=this.height/2},getIndexAngle:function(b){return 2*Math.PI/this.valuesCount*b-Math.PI/2},getPointPosition:function(b,a){var c=this.getIndexAngle(b);
return{x:Math.cos(c)*a+this.xCenter,y:Math.sin(c)*a+this.yCenter}},draw:function(){if(this.display){var b=this.ctx;if(k(this.yLabels,function(a,c){if(0<c){var e;e=this.drawingArea/this.steps*c;var d=this.yCenter-e;if(0<this.lineWidth){if(b.strokeStyle=this.lineColor,b.lineWidth=this.lineWidth,this.lineArc)b.beginPath(),b.arc(this.xCenter,this.yCenter,e,0,2*Math.PI);else{b.beginPath();for(var f=0;f<this.valuesCount;f++)e=this.getPointPosition(f,this.calculateCenterOffset(this.min+c*this.stepValue)),
0===f?b.moveTo(e.x,e.y):b.lineTo(e.x,e.y)}b.closePath();b.stroke()}if(this.showLabels){if(b.font=Q(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)e=b.measureText(a).width,b.fillStyle=this.backdropColor,b.fillRect(this.xCenter-e/2-this.backdropPaddingX,d-this.fontSize/2-this.backdropPaddingY,e+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY);b.textAlign="center";b.textBaseline="middle";b.fillStyle=this.fontColor;b.fillText(a,this.xCenter,d)}}},this),!this.lineArc){b.lineWidth=
this.angleLineWidth;b.strokeStyle=this.angleLineColor;for(var a=this.valuesCount-1;0<=a;a--){if(0<this.angleLineWidth){var c=this.getPointPosition(a,this.calculateCenterOffset(this.max));b.beginPath();b.moveTo(this.xCenter,this.yCenter);b.lineTo(c.x,c.y);b.stroke();b.closePath()}c=this.getPointPosition(a,this.calculateCenterOffset(this.max)+5);b.font=Q(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);b.fillStyle=this.pointLabelFontColor;var e=this.labels.length,d=this.labels.length/
2,f=d/2,g=f>a||a>e-f,e=a===f||a===e-f;b.textAlign=0===a?"center":a===d?"center":d>a?"left":"right";b.textBaseline=e?"middle":g?"bottom":"top";b.fillText(this.labels[a],c.x,c.y)}}}}});e.addEvent(window,"resize",function(){var b;return function(){clearTimeout(b);b=setTimeout(function(){k(a.instances,function(b){b.options.responsive&&b.resize(b.render,!0)})},50)}}());ea?define(function(){return a}):"object"==typeof module&&module.exports&&(module.exports=a);d.Chart=a;a.noConflict=function(){return d.Chart=
c,a}}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){var e=
this.options;this.ScaleClass=d.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,c,d){var q=this.calculateBaseWidth();d=this.calculateX(d)-q/2;a=this.calculateBarWidth(a);return d+a*c+c*e.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*e.barValueSpacing},calculateBarWidth:function(a){return(this.calculateBaseWidth()-(a-1)*e.barDatasetSpacing)/a}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a=
"mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});this.BarClass=d.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(d);c.each(e.data,
function(c,q){d.bars.push(new this.BarClass({value:c,label:a.labels[q],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this);this.buildScale(a.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(a,e,d){c.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,d,e),y:this.scale.endPoint});a.save()},
this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachBars(function(a){a.save()});this.render()},eachBars:function(a){c.each(this.datasets,function(e,d){c.each(e.bars,a,this,d)},this)},getBarsAtEvent:function(a){var e,d=[];a=c.getRelativePosition(a);for(var n=function(a){d.push(a.bars[e])},g=0;g<this.datasets.length;g++)for(e=0;e<this.datasets[g].bars.length;e++)if(this.datasets[g].bars[e].inRange(a.x,a.y))return c.each(this.datasets,
n),d;return d},buildScale:function(a){var e=this,d=function(){var a=[];return e.eachBars(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=
c.calculateScaleRange(d(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(a)},addData:function(a,
e){c.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:e,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this);this.scale.addXLabel(e);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.bars.shift()},this);this.update()},
reflow:function(){c.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var e=a||1;this.clear();this.chart.ctx;this.scale.draw(e);c.each(this.datasets,function(a,d){c.each(a.bars,function(a,c){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,d,c),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},
e).draw())},this)},this)}})}).call(this);
(function(){var d=this.Chart,c=d.helpers,a={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};d.Type.extend({name:"Doughnut",defaults:a,
initialize:function(a){this.segments=[];this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=d.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});
this.calculateTotal(a);c.each(a,function(a,c){this.addData(a,c,!0)},this);this.render()},getSegmentsAtEvent:function(a){var d=[],n=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(n.x,n.y)&&d.push(a)},this),d},addData:function(a,c,d){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,
highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label}));d||(this.reflow(),this.update())},calculateCircumference:function(a){return Math.abs(a)/this.total*Math.PI*2},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments);
c.each(this.activeElements,function(a){a.restore(["fillColor"])});c.each(this.segments,function(a){a.save()});this.render()},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,1);this.reflow();this.update()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;c.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,
innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(a){var d=a?a:1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},d);a.endAngle=a.startAngle+a.circumference;a.draw();0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle)},this)}});d.types.Doughnut.extend({name:"Pie",
defaults:c.merge(a,{percentageInnerCutout:0})})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){this.PointClass=
d.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor",
"strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(d);c.each(e.data,function(c,g){d.points.push(new this.PointClass({value:c,label:a.labels[g],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||
e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this);this.buildScale(a.labels);this.eachPoints(function(a,e){c.extend(a,{x:this.scale.calculateX(e),y:this.scale.endPoint});a.save()},this)},this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachPoints(function(a){a.save()});this.render()},eachPoints:function(a){c.each(this.datasets,function(e){c.each(e.points,a,this)},this)},getPointsAtEvent:function(a){var e=
[],d=c.getRelativePosition(a);return c.each(this.datasets,function(a){c.each(a.points,function(a){a.inRange(d.x,d.y)&&e.push(a)})},this),e},buildScale:function(a){var e=this,k=function(){var a=[];return e.eachPoints(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,
valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=c.calculateScaleRange(k(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,
gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new d.Scale(a)},addData:function(a,e){c.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.addXLabel(e);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.points.shift()},
this);this.update()},reflow:function(){var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var e=a||1;this.clear();var d=this.chart.ctx,n=function(a){return null!==a.value},g=function(a,e,d){return c.findNextWhere(e,n,d)||a},q=function(a,e,d){return c.findPreviousWhere(e,n,d)||a};this.scale.draw(e);c.each(this.datasets,function(a){var u=c.where(a.points,n);c.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),
x:this.scale.calculateX(c)},e)},this);this.options.bezierCurve&&c.each(u,function(a,e){var d=0<e&&e<u.length-1?this.options.bezierCurveTension:0;a.controlPoints=c.splineCurve(q(a,u,e),a,g(a,u,e),d);a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint);a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&
(a.controlPoints.inner.y=this.scale.startPoint)},this);d.lineWidth=this.options.datasetStrokeWidth;d.strokeStyle=a.strokeColor;d.beginPath();c.each(u,function(a,c){if(0===c)d.moveTo(a.x,a.y);else if(this.options.bezierCurve){var e=q(a,u,c);d.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else d.lineTo(a.x,a.y)},this);d.stroke();this.options.datasetFill&&0<u.length&&(d.lineTo(u[u.length-1].x,this.scale.endPoint),d.lineTo(u[0].x,
this.scale.endPoint),d.fillStyle=a.fillColor,d.closePath(),d.fill());c.each(u,function(a){a.draw()})},this)}})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.segments=[];this.SegmentArc=d.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new d.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,
showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:a.length});
this.updateScaleRange(a);this.scale.update();c.each(a,function(a,c){this.addData(a,c,!0)},this);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});this.render()},getSegmentsAtEvent:function(a){var e=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,
d.y)&&e.push(a)},this),e},addData:function(a,c,d){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));d||(this.reflow(),this.update())},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,
1);this.reflow();this.update()},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=a.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var e=[];c.each(a,function(a){e.push(a.value)});a=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(e,c.min([this.chart.width,
this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,a,{size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);c.each(this.segments,function(a){a.save()});this.reflow();this.render()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);
this.scale.update();c.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});c.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})},this)},draw:function(a){var e=a||1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},e);a.endAngle=a.startAngle+a.circumference;0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+
1].startAngle=a.endAngle);a.draw()},this);this.scale.draw()}})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.PointClass=d.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(a);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=
a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(d);c.each(e.data,function(c,g){var q;this.scale.animation||(q=this.scale.getPointPosition(g,this.scale.calculateCenterOffset(c)));d.points.push(new this.PointClass({value:c,label:a.labels[g],datasetLabel:e.label,x:this.options.animation?
this.scale.xCenter:q.x,y:this.options.animation?this.scale.yCenter:q.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(a){c.each(this.datasets,function(e){c.each(e.points,a,this)},this)},getPointsAtEvent:function(a){a=c.getRelativePosition(a);a=c.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},a);var e=Math.round((a.angle-
1.5*Math.PI)/(2*Math.PI/this.scale.valuesCount)),d=[];return(e>=this.scale.valuesCount||0>e)&&(e=0),a.distance<=this.scale.drawingArea&&c.each(this.datasets,function(a){d.push(a.points[e])}),d},buildScale:function(a){this.scale=new d.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,
backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,
pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:a.labels,valuesCount:a.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(a.datasets);this.scale.buildYLabels()},updateScaleRange:function(a){var e=function(){var e=[];return c.each(a,function(a){a.data?e=e.concat(a.data):c.each(a.points,function(a){e.push(a.value)})}),
e}(),e=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(e,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,e)},addData:function(a,e){this.scale.valuesCount++;c.each(a,function(a,c){var d=this.scale.getPointPosition(this.scale.valuesCount,
this.scale.calculateCenterOffset(a));this.datasets[c].points.push(new this.PointClass({value:a,label:e,x:d.x,y:d.y,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.labels.push(e);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();c.each(this.datasets,function(a){a.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(a){a.save()});this.reflow();this.render()},
reflow:function(){c.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(a){var e=a||1,d=this.chart.ctx;this.clear();this.scale.draw();c.each(this.datasets,function(a){c.each(a.points,function(a,c){a.hasValue()&&a.transition(this.scale.getPointPosition(c,this.scale.calculateCenterOffset(a.value)),
e)},this);d.lineWidth=this.options.datasetStrokeWidth;d.strokeStyle=a.strokeColor;d.beginPath();c.each(a.points,function(a,c){0===c?d.moveTo(a.x,a.y):d.lineTo(a.x,a.y)},this);d.closePath();d.stroke();d.fillStyle=a.fillColor;d.fill();c.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}).call(this);!function(d,c){var a=c(d);"object"==typeof module&&null!=module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):d.m=a}("undefined"!=typeof window?window:this,function(d,c){function a(a){return"function"==typeof a}function e(a){return"[object Object]"===ia.call(a)}function k(a){return"[object String]"===ia.call(a)}function n(){}function g(a,b){for(var c=[],d=1,f=arguments.length;f>d;d++)c[d-1]=arguments[d];if(e(a))return R(a,c);if(!k(a))throw Error("selector in m(selector, attrs, children) should be a string");
var d=(f=null!=b&&e(b)&&!("tag"in b||"view"in b||"subtree"in b))?b:{},c=f?c.slice(1):c,c={tag:"div",attrs:{},children:1===c.length&&W(c[0])?c[0]:c},f=c.attrs,g,h=[],M=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g;for(;g=M.exec(a);)""===g[1]&&g[2]?c.tag=g[2]:"#"===g[1]?c.attrs.id=g[2]:"."===g[1]?h.push(g[2]):"["===g[3][0]&&(g=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/.exec(g[3]),c.attrs[g[1]]=g[3]||"");var M="class"in d?"class":"className",l;for(l in d)X.call(d,l)&&(l===M&&null!=d[l]&&""!==d[l]?(h.push(d[l]),f[l]=""):
f[l]=d[l]);h.length&&(f[M]=h.join(" "));return c}function q(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function K(a,b){q(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function u(a){for(var b=0;b<a.length;b++)W(a[b])&&(a=a.concat.apply([],a),b--);return a}function E(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function D(a,b,c,d){K(a,function(a,d){b[a=a.key]=b[a]?{action:Ha,index:d,from:b[a].index,element:c.nodes[b[a].index]||z.createElement("div")}:{action:Ia,index:d}});var e=[],
f;for(f in b)X.call(b,f)&&e.push(b[f]);var e=e.sort(fa),g=Array(c.length);return g.nodes=c.nodes.slice(),q(e,function(b){var e=b.index;if(b.action===Ja&&(x(c[e].nodes,c[e]),g.splice(e,1)),b.action===Ia){var f=z.createElement("div");f.key=a[e].attrs.key;E(d,f,e);g.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[f]});g.nodes[e]=f}if(b.action===Ha){var f=b.element,Ga=d.childNodes[e];Ga!==f&&null!==f&&d.insertBefore(f,Ga||null);g[e]=c[b.from];g.nodes[e]=f}}),g}function G(a,b,c,d){var e=a.length!==b.length;
return e||K(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?D(a,c,b,d):b}function ea(a,b,c){q(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)});q(b.nodes,function(a,d){null!=a.parentNode&&0>c.indexOf(a)&&x([a],[b[d]])});a.length<b.length&&(b.length=a.length);b.nodes=c}function L(a){var b=0;K(a,function(){return q(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function S(a,b,c){return a.tag!==b.tag?!0:c.sort().join()!==Object.keys(b.attrs).sort().join()?
!0:a.attrs.id!==b.attrs.id?!0:a.attrs.key!==b.attrs.key?!0:"all"===g.redraw.strategy()?!b.configContext||!0!==b.configContext.retain:"diff"===g.redraw.strategy()?b.configContext&&!1===b.configContext.retain:!1}function O(b,c,d){S(b,c,d)&&(c.nodes.length&&x(c.nodes),c.configContext&&a(c.configContext.onunload)&&c.configContext.onunload(),c.controllers&&q(c.controllers,function(a){a.onunload&&a.onunload({preventDefault:n})}))}function f(a,b,c){c.length&&(a.views=b,a.controllers=c,q(c,function(a){if(a.onunload&&
a.onunload.$old&&(a.onunload=a.onunload.$old),Y&&a.onunload){var b=a.onunload;a.onunload=n;a.onunload.$old=b}}))}function N(b,c,d,e,f){if(a(c.attrs.config)){var g=f.configContext=f.configContext||{};b.push(function(){return c.attrs.config.call(c,d,!e,g,f)})}}function A(a){if(a.$trusted){if(a=a.match(/<[^\/]|\>\s*[^<]/g),null!=a)return a.length}else if(W(a))return a.length;return 1}function T(a,b,d,e,f,g,k,h,l){a=u(a);var n=[],v=b.length===a.length,t=0,p={},q=!1;K(b,function(a,c){q=!0;p[b[c].attrs.key]=
{action:Ja,index:c}});L(a);q&&(b=G(a,b,p,d));for(var B=0,x=0,z=a.length;z>x;x++){var D=H(d,f,b,e,a[x],b[B],g,e+t||t,k,h,l);D!==c&&(v=v&&D.nodes.intact,t+=A(D),b[B++]=D)}return v||ea(a,b,n),b}function P(a,b,c,d){null!=d.onunload&&0>na.map(function(a){return a.handler}).indexOf(d.onunload)&&na.push({controller:d,handler:d.onunload});a.push(c);b.push(d)}function H(b,d,C,h,l,r,n,M,p,q,v){var t;a:{try{if(null!=l&&null!=l.toString()){t=l;break a}}catch(u){}t=""}l=t;if("retain"===l.subtree)b=r;else{a:{t=
l;if(null!=r){if(ia.call(r)===ia.call(t)){C=r;break a}if(C&&C.nodes){h=M-h;var D=h+(W(t)?t:r.nodes).length;x(C.nodes.slice(h,D),C.slice(h,D))}else r.nodes&&x(r.nodes,r)}C=(r=new t.constructor,r.tag&&(r={}),r.nodes=[],r)}r=C;if(W(l))b=T(l,r,b,M,d,n,p,q,v);else if(null!=l&&e(l)){var w,B=r;d=[];var y=[];r=l;for(C=(l=B)&&l.controllers;null!=r.view;){t=r;r=r.view.$original||r.view;h=C;var D=y,A=d,G;G=l.views;var I=r,L=h,K=t.controller,F=void 0;G=(F="diff"===g.redraw.strategy()&&G?G.indexOf(I):-1,-1<F?
L[F]:a(K)?new K:{});F=t&&t.attrs&&t.attrs.key;r=(t=0===Y||za||h&&-1<h.indexOf(G)?t.view(G):{tag:"placeholder"},"retain"===t.subtree?t:(t.attrs=t.attrs||{},t.attrs.key=F,P(A,D,r,G),t))}if(w=r,"retain"===w.subtree)b=B;else{if(!w.tag&&y.length)throw Error("Component template must return a virtual element, not an array, string, etc.");w.attrs=w.attrs||{};B.attrs=B.attrs||{};l=Object.keys(w.attrs);C=l.length>("key"in w.attrs?1:0);(O(w,B,l),k(w.tag))?(l=0===B.nodes.length,q=w.attrs.xmlns?w.attrs.xmlns:
"svg"===w.tag?"http://www.w3.org/2000/svg":"math"===w.tag?"http://www.w3.org/1998/Math/MathML":q,l?(t=w,r=q,t=t.attrs.is?null==r?z.createElement(t.tag,t.attrs.is):z.createElementNS(r,t.tag,t.attrs.is):null==r?z.createElement(t.tag):z.createElementNS(r,t.tag),r=w,C=C?J(t,r.tag,r.attrs,{},q):r.attrs,E(b,t,M),r=w,r=null!=r.children&&0<r.children.length?H(t,r.tag,c,c,r.children,B.children,!0,0,r.attrs.contenteditable?t:p,q,v):r.children,p=w,B=t,C={tag:p.tag,attrs:C,children:r,nodes:[B]},B=(f(C,d,y),C.children&&
!C.children.nodes&&(C.children.nodes=[]),"select"===p.tag&&"value"in p.attrs&&J(B,p.tag,{value:p.attrs.value},{},q),C)):(t=B,r=w,h=t.nodes[0],t=(C&&J(h,r.tag,r.attrs,t.attrs,q),t.children=H(h,r.tag,c,c,r.children,t.children,!1,0,r.attrs.contenteditable?h:p,q,v),t.nodes.intact=!0,y.length&&(t.views=d,t.controllers=y),h)),b=(l||!0!==n||null==t||E(b,t,M),N(v,w,t,l,B),B)):b=void 0}}else if(a(l))b=r;else if(w=r,v=l,w.nodes.length)if(w.valueOf()!==v.valueOf()||n){n=w;w=n.nodes;if(!p||p!==z.activeElement)if(v.$trusted)x(w,
n),w=ba(b,M,v);else if("textarea"===d)b.value=v;else if(p)p.innerHTML=v;else{(1===w[0].nodeType||1<w.length||w[0].nodeValue.trim&&!w[0].nodeValue.trim())&&(x(n.nodes,n),w=[z.createTextNode(v)]);p=w[0];try{E(b,p,M),p.nodeValue=v}catch(u){}}b=(n=new v.constructor(v),n.nodes=w,n)}else b=(w.nodes.intact=!0,w);else v.$trusted?B=ba(b,M,v):(B=[z.createTextNode(v)],b.nodeName in Va||E(b,B[0],M)),b=(y="string"==typeof v||"number"==typeof v||"boolean"==typeof v?new v.constructor(v):v,y.nodes=B,y)}return b}
function fa(a,b){return a.action-b.action||a.index-b.index}function J(b,c,d,f,g){for(var k in d)if(X.call(d,k)){var l;a:{var h=b,n=k,p=d[k],v=f[k],q=f,u=c,w=g;if(n in q&&v===p&&z.activeElement!==h)"value"===n&&"input"===u&&h.value!==p&&(h.value=p);else{q[n]=p;try{if("config"===n||"key"===n)l=!0;else{if(a(p)&&"on"===n.slice(0,2))h[n]=da(p,h);else if("style"===n&&null!=p&&e(p)){w=h;u=p;h=v;v=void 0;for(v in u)X.call(u,v)&&(null!=h&&h[v]===u[v]||(w.style[v]=u[v]));for(v in h)X.call(h,v)&&(X.call(u,v)||
(w.style[v]=""))}else if(null!=w)"href"===n?h.setAttributeNS("http://www.w3.org/1999/xlink","href",p):h.setAttribute("className"===n?"class":n,p);else if(n in h&&!Wa[n])try{"input"===u&&h[n]===p||(h[n]=p)}catch(D){h.setAttribute(n,p)}else h.setAttribute(n,p);l=void 0}break a}catch(D){if(0>D.message.indexOf("Invalid argument"))throw D;}}l=void 0}!l}return f}function x(a,b){for(var c=a.length-1;-1<c;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b);b[c]&&U(b[c])}a.length&&
(a.length=0)}function U(b){b.configContext&&a(b.configContext.onunload)&&(b.configContext.onunload(),b.configContext.onunload=null);b.controllers&&q(b.controllers,function(b){a(b.onunload)&&b.onunload({preventDefault:n})});b.children&&(W(b.children)?q(b.children,U):b.children.tag&&U(b.children))}function F(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(ga(a),a);else{var b=a.childNodes;if(b&&b.length)for(var c=0;c<b.length;c++)F(b[c])}return a}function ga(a){for(var b=document.createElement("script"),
c=a.attributes,d=0;d<c.length;d++)b.setAttribute(c[d].name,c[d].value);return b.text=a.innerHTML,b}function ba(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=z.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else try{a.appendChild(z.createRange().createContextualFragment(c))}catch(g){a.insertAdjacentHTML("beforeend",c),F(a)}for(c=[];a.childNodes[b]!==d;)c.push(a.childNodes[b]),b++;return c}
function da(a,b){return function(c){c=c||event;g.redraw.strategy("diff");g.startComputation();try{return a.call(b,c)}finally{h()}}}function V(a){var b=Aa.indexOf(a);return 0>b?Aa.push(a)-1:b}function Q(a){function b(){return arguments.length&&(a=arguments[0]),a}return b.toJSON=function(){return a},b}function R(a,b){function c(){return(a.controller||n).apply(this,b)||this}function d(c){for(var e=[c].concat(b),f=1;f<arguments.length;f++)e.push(arguments[f]);return a.view.apply(a,e)}a.controller&&(c.prototype=
a.controller.prototype);d.$original=a.view;var e={controller:c,view:d};return b[0]&&null!=b[0].key&&(e.attrs={key:b[0].key}),e}function ha(a,c,d,e){if(!e){g.redraw.strategy("all");g.startComputation();oa[d]=c;e=Ka=a?a:a={controller:n};var f=new (a.controller||n);return e===Ka&&(Z[d]=f,Ba[d]=a),h(),null===a&&b(c,d),Z[d]}null==a&&b(c,d)}function b(a,b){oa.splice(b,1);Z.splice(b,1);Ba.splice(b,1);Fa(a);Aa.splice(V(a),1)}function l(){ja&&(ja(),ja=null);q(oa,function(a,b){var c=Ba[b];if(Z[b]){var d=[Z[b]];
g.render(a,c.view?c.view(Z[b],d):"")}});pa&&(pa(),pa=null);ca=null;La=new Date;g.redraw.strategy("diff")}function h(){"none"===g.redraw.strategy()?(Y--,g.redraw.strategy("diff")):g.endComputation()}function y(a,b,c){ka={};var d=c.indexOf("?");-1!==d&&(ka=ua(c.substr(d+1,c.length)),c=c.substr(0,d));var d=Object.keys(b),e=d.indexOf(c);if(-1!==e)return g.mount(a,b[d[e]]),!0;for(var f in b)if(X.call(b,f)){if(f===c)return g.mount(a,b[f]),!0;d=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,
"([^\\/]+)")+"/?$");if(d.test(c))return c.replace(d,function(){var c=f.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);q(c,function(a,b){ka[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])});g.mount(a,b[f])}),!0}}function p(a){if(a=a||event,!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.currentTarget||a.srcElement;for(a="pathname"===g.route.mode&&b.search?ua(b.search.slice(1)):{};b&&!/a/i.test(b.nodeName);)b=b.parentNode;Y=0;g.route(b[g.route.mode].slice(la[g.route.mode].length),
a)}}function ta(){"hash"!==g.route.mode&&aa.hash?aa.hash=aa.hash:d.scrollTo(0,0)}function ma(a,b){var d={},f=[],g;for(g in a)if(X.call(a,g)){var k=b?b+"["+g+"]":g,h=a[g];if(null===h)f.push(encodeURIComponent(k));else if(e(h))f.push(ma(h,k));else if(W(h)){var l=[];d[k]=d[k]||{};q(h,function(a){d[k][a]||(d[k][a]=!0,l.push(encodeURIComponent(k)+"="+encodeURIComponent(a)))});f.push(l.join("&"))}else h!==c&&f.push(encodeURIComponent(k)+"="+encodeURIComponent(h))}return f.join("&")}function ua(a){if(""===
a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};return q(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===c.length?decodeURIComponent(c[1]):null;null!=b[a]?(W(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c}),b}function Fa(a){var b=V(a);x(a.childNodes,qa[b]);qa[b]=c}function va(a,b){var c=g.prop(b);return a.then(c),c.then=function(c,d){return va(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c}function ya(b,c){function d(a){l=a||Ma;p.map(function(a){l===
wa?a.resolve(n):a.reject(n)})}function f(b,c,d,h){if((null!=n&&e(n)||a(n))&&a(b))try{var k=0;b.call(n,function(a){k++||(n=a,c())},function(a){k++||(n=a,d())})}catch(l){g.deferred.onerror(l),n=l,d()}else h()}function k(){var e;try{e=n&&n.then}catch(p){return g.deferred.onerror(p),n=p,l=ra,k()}l===ra&&g.deferred.onerror(n);f(e,function(){l=sa;k()},function(){l=ra;k()},function(){try{l===sa&&a(b)?n=b(n):l===ra&&a(c)&&(n=c(n),l=sa)}catch(k){return g.deferred.onerror(k),n=k,d()}n===h?(n=TypeError(),d()):
f(e,function(){d(wa)},d,function(){d(l===sa&&wa)})})}var h=this,l=0,n=0,p=[];h.promise={};h.resolve=function(a){return l||(n=a,l=sa,k()),h};h.reject=function(a){return l||(n=a,l=ra,k()),h};h.promise.then=function(a,b){var c=new ya(a,b);return l===wa?c.resolve(n):l===Ma?c.reject(n):p.push(c),c.promise}}function Pa(a){return a}function Qa(a){var b=a.callbackName||"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),e=z.createElement("script");d[b]=function(f){e.parentNode.removeChild(e);
a.onload({type:"load",target:{responseText:f}});d[b]=c};e.onerror=function(){return e.parentNode.removeChild(e),a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),d[b]=c,!1};e.onload=function(){return!1};e.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+ma(a.data||{});z.body.appendChild(e)}function Ra(b){var c=new d.XMLHttpRequest;if(c.open(b.method,b.url,!0,b.user,b.password),c.onreadystatechange=
function(){4===c.readyState&&(200<=c.status&&300>c.status?b.onload({type:"load",target:c}):b.onerror({type:"error",target:c}))},b.serialize===JSON.stringify&&b.data&&"GET"!==b.method&&c.setRequestHeader("Content-Type","application/json; charset=utf-8"),b.deserialize===JSON.parse&&c.setRequestHeader("Accept","application/json, text/*"),a(b.config)){var e=b.config(c,b);null!=e&&(c=e)}if((e="GET"!==b.method&&b.data?b.data:"")&&!k(e)&&e.constructor!==d.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");
return c.send(e),c}function Sa(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?Qa(a):Ra(a)}function Ta(a,b,c){"GET"===a.method&&"jsonp"!==a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=ma(b),a.url+=b?c+b:""):a.data=c(b)}function Ua(a,b){return b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1);a=b[c]||a;return delete b[c],a})),a}g.version=function(){return"v0.2.5"};var z,aa,xa,Na,X={}.hasOwnProperty,ia={}.toString,W=Array.isArray||function(a){return"[object Array]"===ia.call(a)},Va=
{AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1};g.deps=function(a){a=d=a||window;z=a.document;aa=a.location;Na=a.cancelAnimationFrame||a.clearTimeout;xa=a.requestAnimationFrame||a.setTimeout;return d};g.deps(d);var Ja=1,Ia=2,Ha=3,Y=0;g.startComputation=function(){Y++};g.endComputation=function(){1<Y?Y--:(Y=0,g.redraw())};var Oa,na=[],za=!1,Wa={list:1,style:1,form:1,type:1,width:1,height:1},Xa={appendChild:function(a){Oa===c&&(Oa=
z.createElement("html"));z.documentElement&&z.documentElement!==a?z.replaceChild(a,z.documentElement):z.appendChild(a);this.childNodes=z.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},Aa=[],qa={};g.render=function(a,b,d){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var e,f=[],g=V(a),k=a===z;e=k||a===z.documentElement?Xa:a;k&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b});qa[g]===c&&x(e.childNodes);!0===d&&Fa(a);
qa[g]=H(e,null,c,c,b,qa[g],!1,0,null,c,f);q(f,function(a){a()})};g.trust=function(a){return a=new String(a),a.$trusted=!0,a};g.prop=function(b){return(null!=b&&(e(b)||a(b))||"undefined"!=typeof Promise&&b instanceof Promise)&&a(b.then)?va(b):Q(b)};var Ka,oa=[],Ba=[],Z=[],ca=null,La=0,ja=null,pa=null;g.component=function(a){for(var b=Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return R(a,b)};g.mount=g.module=function(b,c){if(!b)throw Error("Please ensure the DOM element exists before rendering a template into it.");
var d=oa.indexOf(b);0>d&&(d=oa.length);var e=!1,f={preventDefault:function(){e=!0;ja=pa=null}};return q(na,function(a){a.handler.call(a.controller,f);a.controller.onunload=null}),e?q(na,function(a){a.controller.onunload=a.handler}):na=[],Z[d]&&a(Z[d].onunload)&&Z[d].onunload(f),ha(c,b,d,e)};var Ca=!1;g.redraw=function(a){if(!Ca){Ca=!0;a&&(za=!0);try{ca&&!a?(xa===d.requestAnimationFrame||16<new Date-La)&&(0<ca&&Na(ca),ca=xa(l,16)):(l(),ca=xa(function(){ca=null},16))}finally{Ca=za=!1}}};g.redraw.strategy=
g.prop();g.withAttr=function(a,b,c){return function(d){d=d||window.event;var e=d.currentTarget||this;d=c||this;e=a in e?e[a]:e.getAttribute(a);b.call(d,e)}};var ka,I,la={pathname:"",hash:"#",search:"?"},Da=n,Ea=!1;g.route=function(a,b,c,e){if(0===arguments.length)return I;if(3===arguments.length&&k(b)){Da=function(d){d=I=d.slice(la[g.route.mode].length);if(!y(a,c,d)){if(Ea)throw Error("Ensure the default route matches one of the routes defined in m.route");Ea=!0;g.route(b,!0);Ea=!1}};var f="hash"===
g.route.mode?"onhashchange":"onpopstate";return d[f]=function(){var a=aa[g.route.mode];"pathname"===g.route.mode&&(a+=aa.search);I!==a.slice(la[g.route.mode].length)&&Da(a)},ja=ta,void d[f]()}if(a.addEventListener||a.attachEvent)return a.href=("pathname"!==g.route.mode?aa.pathname:"")+la[g.route.mode]+e.attrs.href,void(a.addEventListener?(a.removeEventListener("click",p),a.addEventListener("click",p)):(a.detachEvent("onclick",p),a.attachEvent("onclick",p)));if(k(a)){f=I;I=a;var h,l=b||{},n=I.indexOf("?");
h=-1<n?ua(I.slice(n+1)):{};for(var q in l)X.call(l,q)&&(h[q]=l[q]);h=ma(h);n=-1<n?I.slice(0,n):I;h&&(I=n+(-1===n.indexOf("?")?"?":"&")+h);f=!0===(3===arguments.length?c:b)||f===a;if(d.history.pushState){var u=f?"replaceState":"pushState";ja=ta;pa=function(){try{d.history[u](null,z.title,la[g.route.mode]+I)}catch(a){aa[g.route.mode]=I}}}else aa[g.route.mode]=I;Da(la[g.route.mode]+I)}};g.route.param=function(a){if(!ka)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");
return a?ka[a]:ka};g.route.mode="search";g.route.buildQueryString=ma;g.route.parseQueryString=ua;g.deferred=function(){var a=new ya;return a.promise=va(a.promise),a};var sa=1,ra=2,wa=3,Ma=4;return g.deferred.onerror=function(a){if("[object Error]"===ia.call(a)&&!/ Error/.test(a.constructor.toString()))throw Y=0,a;},g.sync=function(a){function b(a,g){return function(b){return e[a]=b,g||(f="reject"),0===--d&&(c.promise(e),c[f](e)),b}}var c=g.deferred(),d=a.length,e=[],f="resolve";return 0<a.length?
q(a,function(a,c){a.then(b(c,!0),b(c,!1))}):c.resolve([]),c.promise},g.request=function(a){!0!==a.background&&g.startComputation();var b,c,d,e=new ya;return a.dataType&&"jsonp"===a.dataType.toLowerCase()?(b=a.serialize=c=a.deserialize=Pa,d=function(a){return a.responseText}):(b=a.serialize=a.serialize||JSON.stringify,c=a.deserialize=a.deserialize||JSON.parse,d=a.extract||function(a){return a.responseText.length||c!==JSON.parse?a.responseText:null}),a.method=(a.method||"GET").toUpperCase(),a.url=Ua(a.url,
a.data),Ta(a,a.data,b),a.onload=a.onerror=function(b){try{b=b||event;var f=c(d(b.target,a));"load"===b.type?(a.unwrapSuccess&&(f=a.unwrapSuccess(f,b.target)),W(f)&&a.type?q(f,function(b,c){f[c]=new a.type(b)}):a.type&&(f=new a.type(f)),e.resolve(f)):(a.unwrapError&&(f=a.unwrapError(f,b.target)),e.reject(f))}catch(h){e.reject(h),g.deferred.onerror(h)}finally{!0!==a.background&&g.endComputation()}},Sa(a),e.promise=va(e.promise,a.initialValue),e.promise},g});var lruAppCache=new Cache(-1,!1,new Cache.LocalStorageCacheStorage("searchcode")),testing={CodeResultList:Array,RepoFilterList:Array,LanguageFilterList:Array,OwnerFilterList:Array,CodeResult:function(d){this.filename=m.prop(d.fileName);this.reponame=m.prop(d.repoName);this.matchingresults=m.prop(d.matchingResults);this.repolocation=m.prop(d.repoLocation);this.documentid=m.prop(d.documentId);this.codeid=m.prop(d.codeId);this.filelocation=m.prop(d.fileLocation);this.codepath=m.prop(d.codePath);this.languagename=
m.prop(d.languageName);this.codelines=m.prop(d.codeLines)},RepoFilter:function(d){this.count=m.prop(d.count);this.source=m.prop(d.repoName);this.selected=m.prop(d.selected)},LanguageFilter:function(d){this.count=m.prop(d.count);this.language=m.prop(d.languageName);this.selected=m.prop(d.selected)},OwnerFilter:function(d){this.count=m.prop(d.count);this.owner=m.prop(d.owner);this.selected=m.prop(d.selected)},vm:function(){var d={init:function(){d.searchvalue=m.prop("");d.langfilters=[];d.repositoryfilters=
[];d.ownfilters=[];d.activelangfilters=[];d.activerepositoryfilters=[];d.activeownfilters=[];d.pages=[];d.currentlyloading=m.prop(!1);d.currentpage=m.prop(0);if(window.localStorage){var c=JSON.parse(localStorage.getItem("toggleinstant"));d.filterinstantly=null!==c?c:!0}else d.filterinstantly=!0;d.clearfilters=function(){d.langfilters=[];d.repositoryfilters=[];d.ownfilters=[]};d.toggleinstant=function(){window.localStorage&&localStorage.setItem("toggleinstant",JSON.stringify(!d.filterinstantly));d.filterinstantly=
!d.filterinstantly};d.togglefilter=function(a,c){switch(a){case "language":-1===_.indexOf(d.langfilters,c)?d.langfilters.push(c):d.langfilters=_.without(d.langfilters,c);break;case "repo":-1===_.indexOf(d.repositoryfilters,c)?d.repositoryfilters.push(c):d.repositoryfilters=_.without(d.repositoryfilters,c);break;case "owner":-1===_.indexOf(d.ownfilters,c)?d.ownfilters.push(c):d.ownfilters=_.without(d.ownfilters,c)}};d.filterexists=function(a,c){switch(a){case "language":if(-1===_.indexOf(d.langfilters,
c))return!1;break;case "repo":if(-1===_.indexOf(d.repositoryfilters,c))return!1;break;case "owner":if(-1===_.indexOf(d.ownfilters,c))return!1}return!0};d.search=function(a,c){if(!d.currentlyloading()){d.currentlyloading(!0);m.redraw();var k="",n="",g="";0!=d.langfilters.length&&(k="&lan="+_.map(d.langfilters,function(a){return encodeURIComponent(a)}).join("&lan="));0!=d.repositoryfilters.length&&(n="&repo="+_.map(d.repositoryfilters,function(a){return encodeURIComponent(a)}).join("&repo="));0!=d.ownfilters.length&&
(g="&own="+_.map(d.ownfilters,function(a){return encodeURIComponent(a)}).join("&own="));var q=0,K="";void 0!==a&&(q=a,d.currentpage(a),0!==q&&(K="&p="+q));d.activelangfilters=JSON.parse(JSON.stringify(d.langfilters));d.activerepositoryfilters=JSON.parse(JSON.stringify(d.repositoryfilters));d.activeownfilters=JSON.parse(JSON.stringify(d.ownfilters));void 0===c&&history.pushState({searchvalue:d.searchvalue(),langfilters:d.activelangfilters,repofilters:d.activerepositoryfilters,ownfilters:d.activeownfilters,
currentpage:d.currentpage()},"search","?q="+encodeURIComponent(d.searchvalue())+k+n+g+K);var u="/api/codesearch/?q="+encodeURIComponent(d.searchvalue())+k+n+g+"&p="+q,k=lruAppCache.getItem(u),E=function(a){d.coderesults=new testing.CodeResultList;d.repofilters=new testing.RepoFilterList;d.languagefilters=new testing.LanguageFilterList;d.ownerfilters=new testing.OwnerFilterList;d.totalhits=a.totalHits;d.altquery=a.altQuery;d.query=a.query;d.pages=a.pages;d.currentpage(a.page);_.each(a.codeResultList,
function(a){d.coderesults.push(new testing.CodeResult(a))});_.each(a.repoFacetResults,function(a){d.repofilters.push(new testing.RepoFilter(a))});_.each(a.languageFacetResults,function(a){d.languagefilters.push(new testing.LanguageFilter(a))});_.each(a.repoOwnerResults,function(a){d.ownerfilters.push(new testing.OwnerFilter(a))});d.currentlyloading(!1);m.redraw()};null!==k?E(k):m.request({method:"GET",background:!0,url:u}).then(function(a){lruAppCache.setItem(u,a,{expirationAbsolute:null,expirationSliding:10,
priority:Cache.Priority.HIGH});E(a)})}}}};return d}(),controller:function(){testing.vm.init()},view:function(){return m("div",[m.component(SearchOptionsComponent),m.component(SearchCountComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,repofilters:testing.vm.activerepositoryfilters,languagefilters:testing.vm.activelangfilters,ownerfilters:testing.vm.activeownfilters}),m.component(SearchChartComponent,{languagefilters:testing.vm.langfilters,repofilters:testing.vm.repofilters}),m.component(SearchLoadingComponent,
{currentlyloading:testing.vm.currentlyloading}),m("div.row",[m("div.col-md-3.search-filters-container.search-filters",[m.component(SearchNextPreviousComponent,{currentpage:testing.vm.currentpage,pages:testing.vm.pages,setpage:testing.vm.setpage,search:testing.vm.search,totalhits:testing.vm.totalhits}),m.component(SearchButtonFilterComponent,{totalhits:testing.vm.totalhits,clearfilters:testing.vm.clearfilters,search:testing.vm.search,languagefilters:testing.vm.langfilters,repofilters:testing.vm.repositoryfilters,
ownfilters:testing.vm.ownfilters,filterinstantly:testing.vm.filterinstantly}),m.component(SearchAlternateFilterComponent,{query:testing.vm.query,altquery:testing.vm.altquery}),m.component(SearchRepositoriesFilterComponent,{repofilters:testing.vm.repofilters,search:testing.vm.search,filterinstantly:testing.vm.filterinstantly}),m.component(SearchLanguagesFilterComponent,{languagefilters:testing.vm.languagefilters,search:testing.vm.search,filterinstantly:testing.vm.filterinstantly}),m.component(SearchOwnersFilterComponent,
{ownerfilters:testing.vm.ownerfilters,search:testing.vm.search,filterinstantly:testing.vm.filterinstantly}),m.component(FilterOptionsComponent,{filterinstantly:testing.vm.filterinstantly})]),m("div.col-md-9.search-results",[m.component(SearchNoResultsComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,altquery:testing.vm.altquery,query:testing.vm.query}),m.component(SearchResultsComponent,{coderesults:testing.vm.coderesults})]),m.component(SearchPagesComponent,{currentpage:testing.vm.currentpage,
pages:testing.vm.pages,search:testing.vm.search})])])}},SearchNoResultsComponent={controller:function(){return{doaltquery:function(d){testing.vm.searchvalue(d);testing.vm.search()}}},view:function(d,c){if(0!==c.totalhits)return m("div");var a=m("h5","Try searching with fewer and more general keywords or if you have filters remove them.");0!==c.altquery.length&&(a="Try one of the following searches instead",1===c.altquery.length&&(a="Try the following search instead"),a=m("div",[m("h5",a),m("ul",{style:{"list-style-type":"none"}},
_.map(c.altquery,function(a){return m("li",m("a",{href:"",onclick:function(){d.doaltquery(a)}},a))}))]));return m("div",[m("h4","No results found for ",m("i.grey",c.query)),a])}},SearchNextPreviousComponent={controller:function(){},view:function(d,c){if(void 0===c.pages||void 0===c.totalhits||0===c.totalhits)return m("div");var a="",e="";0==c.currentpage()&&(a="disabled");c.currentpage()+1>=c.pages.length&&(e="disabled");return m("div",[m("h5","Page "+(c.currentpage()+1)+" of "+(0==c.pages.length?
1:c.pages.length)),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:a,onclick:function(){c.search(c.currentpage()-1)},value:"\u25c0 Previous"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:e,onclick:function(){c.search(c.currentpage()+1)},value:"Next \u25b6"}))])}},SearchLoadingComponent={controller:function(){},view:function(d,c){var a={};!1===c.currentlyloading()&&(a={style:{display:"none"}});return m("div.search-loading",
a,[m("img",{src:"/img/loading.gif"}),m("h5","Loading...")])}},SearchPagesComponent={controller:function(){},view:function(d,c){return m("div.search-pagination",m("ul.pagination",[_.map(c.pages,function(a){return m("li",{"class":a==c.currentpage()?"active":""},m("a",{onclick:function(){c.search(a);window.scrollTo(0,0)}},a+1))})]))}},SearchButtonFilterComponent={controller:function(){},view:function(d,c){return void 0===c.totalhits||0===c.totalhits&&0===c.languagefilters.length+c.repofilters.length+
c.ownfilters.length?m("div"):0===c.totalhits&&0!==c.languagefilters.length+c.repofilters.length+c.ownfilters.length?m("div",[m("h5","Filter Results"),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"})]):m("div",[m("h5","Filter Results"),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",
{type:"submit",disabled:c.filterinstantly,onclick:function(){c.search()},value:"Apply"}))])}},FilterOptionsComponent={view:function(d,c){var a={type:"checkbox",onclick:function(){testing.vm.toggleinstant()}};c.filterinstantly&&(a.checked="checked");return m("div",m("h5","Filter Options"),m("div.checkbox",m("label",[m("input",a),m("span","Apply Filters Instantly")])))}},SearchRepositoriesFilterComponent={controller:function(){var d=!1,c="";return{trimrepo:function(a){0!==c.length||d||(a=_.first(a,
5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.source().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("repo",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.repofilters||0==c.repofilters.length)return a;!d.hasfilter()&&d.trimlength()<c.repofilters.length&&
(a=c.repofilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more repositories ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less repositories ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Repositories"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Repositories",value:d.getfiltervalue()}),_.map(d.trimrepo(c.repofilters),function(a,k){return m.component(FilterCheckboxComponent,
{onclick:function(){d.clickenvent(a.source());c.filterinstantly&&c.search()},value:a.source(),count:a.count(),checked:testing.vm.filterexists("repo",a.source())})}),a])}},SearchLanguagesFilterComponent={controller:function(){var d=!1,c="";return{trimlanguage:function(a){0!==c.length||d||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.language().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("language",
a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.languagefilters||0==c.languagefilters.length)return a;!d.hasfilter()&&d.trimlength()<c.languagefilters.length&&(a=c.languagefilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more languages ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less languages ",m("span.glyphicon.glyphicon-chevron-up"))));
return m("div",[m("h5","Languages"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Languages",value:d.getfiltervalue()}),_.map(d.trimlanguage(c.languagefilters),function(a,k){return m.component(FilterCheckboxComponent,{onclick:function(){d.clickenvent(a.language());c.filterinstantly&&c.search()},value:a.language(),count:a.count(),checked:testing.vm.filterexists("language",a.language())})}),a])}},SearchOwnersFilterComponent={controller:function(){var d=!1,c="";
return{trimlanguage:function(a){0!==c.length||d||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.owner().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("owner",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.ownerfilters||0==c.ownerfilters.length)return a;
!d.hasfilter()&&d.trimlength()<c.ownerfilters.length&&(a=c.ownerfilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more owners ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less owners ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Owners"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Owners",value:d.getfiltervalue()}),_.map(d.trimlanguage(c.ownerfilters),function(a,
k){return m.component(FilterCheckboxComponent,{onclick:function(){d.clickenvent(a.owner());c.filterinstantly&&c.search()},value:a.owner(),count:a.count(),checked:testing.vm.filterexists("owner",a.owner())})}),a])}},FilterCheckboxComponent={view:function(d,c){var a={type:"checkbox",onclick:c.onclick};c.checked&&(a.checked="checked");return m("div.checkbox",m("label",[m("input",a),m("span",c.value),m("span",{"class":"badge pull-right"},c.count)]))}},SearchOptionsComponent={controller:function(){return{dosearch:function(){testing.vm.search()}}},
view:function(d,c){return m("div",{"class":"search-options"},m("form",{onsubmit:function(a){d.dosearch();return!1}},m("div.form-inline",[m("div.form-group",m("input.form-control",{autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false",size:"50",placeholder:"Search Expression",onkeyup:m.withAttr("value",testing.vm.searchvalue),value:testing.vm.searchvalue(),type:"search",id:"searchbox"})),m("input.btn.btn-success",{value:"search",type:"submit",onclick:d.dosearch.bind(this)})])))}},
SearchCountComponent={controller:function(){return{}},view:function(d,c){if(void 0===c.totalhits)return m("div");var a="",e="",k="";if(0!==c.repofilters.length){var n="repository";2<=c.repofilters.length&&(n="repositories");a=" filtered by "+n+' "'+c.repofilters.join(", ")+'"'}0!==c.languagefilters.length&&(n="language",2<=c.languagefilters.length&&(n="languages"),e=(""===a?" filtered by "+n+' "':" and "+n+' "')+c.languagefilters.join(", ")+'"');0!=c.ownerfilters.length&&(n="owner",2<=c.ownerfilters.length&&
(n="owners"),k=""===a&&""===e?" filtered by "+n+' "':" and "+n+' "',k=k+c.ownerfilters.join(", ")+'"');document.title='Search for "'+c.query+'"'+a+e+k;return m("div.row.search-count",[m("b",c.totalhits+" results: "),m("span.grey",'"'+c.query+'"'+a+e+k)])}},SearchChartComponent={controller:function(){return{}},view:function(d,c){return m("div.row.search-chart",m("canvas",{id:"search-chart"}))}},SearchAlternateFilterComponent={controller:function(){return{doaltquery:function(d){testing.vm.searchvalue(d);
testing.vm.search()}}},view:function(d,c){return void 0===c.altquery||0===c.altquery.length?m("div"):m("div",[m("h5","Alternate Searches"),m("div",[_.map(c.altquery,function(a){return m("div.checkbox",m("label",[m("a",{onclick:function(){d.doaltquery(a)}},a)]))})])])}},SearchResultsComponent={controller:function(){return{fixcodepath:function(d){return"/"+d.split("/").slice(1,1E5).join("/")}}},view:function(d,c){return m("div",[_.map(c.coderesults,function(a){return m("div.code-result",[m("div",m("h5",
[m("a",{href:"/file/"+a.codeid()+"/"+a.codepath()},a.filename()+" in "+a.reponame()),m("small"," | "+d.fixcodepath(a.codepath())+" | "+a.codelines()+" lines | "+a.languagename())])),m("ol.code-result",[_.map(a.matchingresults(),function(c){return m("li",{value:c.lineNumber},m("a",{href:"/file/"+a.codeid()+"/"+a.codepath()+"#"+c.lineNumber},m("pre",m.trust(c.line))))})]),m("hr",{"class":"spacer"})])})])}};m.mount(document.getElementsByClassName("container")[0],{controller:testing.controller,view:testing.view});
window.onpopstate=function(d){testing.vm.searchvalue(d.state.searchvalue);testing.vm.currentpage(d.state.currentpage);testing.vm.activelangfilters=d.state.langfilters;testing.vm.langfilters=d.state.langfilters;testing.vm.activerepositoryfilters=d.state.repofilters;testing.vm.repositoryfilters=d.state.repofilters;testing.vm.ownfilters=d.state.ownfilters;testing.vm.activeownfilters=d.state.ownfilters;testing.vm.search(d.state.currentpage,!0);popstate=!0};
void 0!==preload&&(testing.vm.searchvalue(preload.query),testing.vm.currentpage(preload.page),testing.vm.activelangfilters=preload.languageFacets,testing.vm.langfilters=preload.languageFacets,testing.vm.activerepositoryfilters=preload.repositoryFacets,testing.vm.repositoryfilters=preload.repositoryFacets,testing.vm.ownfilters=preload.ownerFacets,testing.vm.activeownfilters=preload.ownerFacets,testing.vm.search(preload.page,!0));
